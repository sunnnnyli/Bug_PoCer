// SPDX-License-Identifier: MIT

pragma solidity ^0.6.12;
pragma experimental ABIEncoderV2;

import "../src/Reentrancy/Reentrancy.sol";
import "../exploits/Reentrancy/ReentrancyExploitAttempt.sol";
import "forge-std/console.sol";
import "forge-std/test.sol";


contract TestReentrancyExploit is Test {

    function testHack() public {
        
        // deploy contracts
        Reentrancy victim = new Reentrancy();
        ReentrancyExploit attacker = new ReentrancyExploit(address(victim));
        
        vm.deal(address(victim), 1 ether);
        vm.deal(address(attacker), 1 ether);

        attacker.hack();

        assertTrue(address(victim).balance == 0);
        assertTrue(address(attacker).balance > 1 ether);    
    }
}