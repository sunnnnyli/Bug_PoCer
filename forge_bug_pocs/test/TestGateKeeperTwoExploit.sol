// SPDX-License-Identifier: MIT

pragma solidity ^0.8.0;
import "../src/GateKeeperTwo/GateKeeperTwo.sol";
import "exploits/GateKeeperTwo/GateKeeperTwoExploitSolution.sol";
import "forge-std/console.sol";
import "forge-std/test.sol";


contract TestGateKeeperTwoExploit is Test {

    function testHack() public {
        
        GateKeeperTwo victim = new GateKeeperTwo();
        GateKeeperTwoExploit attacker = new GateKeeperTwoExploit(address(victim));
        
        vm.deal(address(victim), 1 ether);
        vm.deal(address(attacker), 1 ether);

        attacker.hack();

        assertTrue(victim.entrant() == tx.origin, "Entrant should be this contract");
    }
}