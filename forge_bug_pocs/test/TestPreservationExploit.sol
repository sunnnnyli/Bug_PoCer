// SPDX-License-Identifier: MIT

pragma solidity ^0.8.0;
import "../src/Preservation/Preservation.sol";
import "../exploits/Preservation/PreservationExploitSolution.sol";
import "forge-std/console.sol";
import "forge-std/test.sol";


contract TestPreservationExploit is Test {

    function testHack() public {
        
        address libraryOne = address(new LibraryContract());
        address libraryTwo = address(new LibraryContract());

        Preservation victim = new Preservation(libraryOne, libraryTwo);
        PreservationExploit attacker = new PreservationExploit(address(victim));
        
        attacker.hack();
        assertTrue(victim.owner() == address(attacker), "owner should be attacker");
    }
}